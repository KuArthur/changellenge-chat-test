(this["webpackJsonpchangellenge-chat-test"]=this["webpackJsonpchangellenge-chat-test"]||[]).push([[0],{348:function(e){e.exports=JSON.parse('[{"id":1,"name":"\u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432","img":"/img/user1.png"},{"id":2,"name":"\u0410\u043d\u043d\u0430 \u0410\u043d\u043d\u043e\u0432\u043d\u0430","img":"/img/user2.png"}]')},422:function(e,t,n){},423:function(e,t,n){},424:function(e,t,n){},425:function(e,t,n){},427:function(e,t,n){},428:function(e,t,n){},429:function(e,t,n){},430:function(e,t,n){"use strict";n.r(t);n(91),n(102),n(103),n(104),n(105),n(106),n(107),n(108),n(109),n(110),n(111),n(112),n(113),n(114),n(115),n(150),n(152),n(153),n(154),n(155),n(156),n(157),n(159),n(160),n(117),n(164),n(165),n(69),n(169),n(170),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(122),n(123),n(187),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(125),n(204),n(205),n(206),n(207),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(218),n(219),n(220),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(82),n(238),n(239),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(128),n(259),n(260),n(130),n(261),n(262),n(263),n(264),n(71),n(265),n(266),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(333),n(334),n(137),n(336),n(337),n(338),n(340),n(138),n(365),n(414),n(139);var s=n(19),r=n.n(s),a=n(345),c=n.n(a),i=(n(422),n(23)),u=n.n(i),o=n(39),l=n(50),j=(n(423),n(90)),f=n.n(j),d=(n(424),n(425),n(3));function h(e){var t=e.user,n=e.handleClick,s=e.isSelected;return Object(d.jsxs)("div",{className:f()("User",s?"User-selected":""),onClick:function(){return n(t)},children:[Object(d.jsx)("img",{className:"User--photo",src:"/changellenge-chat-test"+t.img,alt:""}),Object(d.jsx)("span",{className:"User--name",children:t.name})]})}function b(e){var t=e.users,n=e.onUserSelect,r=e.selectedUser,a=Object(s.useState)(!1),c=Object(l.a)(a,2),i=c[0],u=c[1],o=function(){u(!i)};return Object(d.jsxs)("div",{className:"UsersList",children:[Object(d.jsxs)("div",{className:"UsersList--title",onClick:o,children:[Object(d.jsx)("span",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0440\u0443\u0437\u0435\u0439:"}),r&&Object(d.jsx)("span",{className:"Userlist--username",children:r.name})]}),Object(d.jsx)("div",{className:f()("UsersList--users",i?"UsersList--users-active":""),children:t.map((function(e){return Object(d.jsx)("div",{className:"UsersList--user",onClick:o,children:Object(d.jsx)(h,{user:e,isSelected:r&&e.id===r.id,handleClick:n},e.id)})}))})]})}n(427);var p=n.p+"static/media/user.a3d9eecd.svg";function m(e){var t=e.messages;return Object(d.jsx)("div",{className:"MessagesList",children:t.map((function(e,t){return Object(d.jsxs)("div",{className:"MessagesList--message",children:[Object(d.jsx)("p",{className:"MessagesList--text",children:e}),Object(d.jsx)("img",{className:"MessagesList--photo",src:p,alt:""})]},t)}))})}n(428);function v(e){var t=e.onSendMessage,n=e.onTextChange,s=e.value;return Object(d.jsx)("div",{className:"Controller",children:Object(d.jsx)("form",{onSubmit:function(e){t(),e.preventDefault()},children:Object(d.jsxs)("div",{className:"Controller--wrap",children:[Object(d.jsx)("input",{onChange:function(e){n(e.target.value)},value:s,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",className:"Controller--input"}),Object(d.jsx)("button",{className:"Controller--button"})]})})})}n(429);function O(e){var t=e.link,n=e.href;return Object(d.jsx)("a",{className:"Link",href:n,children:t})}var x=n(346),g=n(347),k=n(348),N=new(function(){function e(){Object(x.a)(this,e),this.messages={}}return Object(g.a)(e,[{key:"getUserList",value:function(){var e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserHistory",value:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",this.messages[t]||[]);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=Object(o.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log({userId:t,messageText:n}),this.messages[t]=(this.messages[t]||[]).concat(n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}());var C=function(){var e=Object(s.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)([]),c=Object(l.a)(a,2),i=c[0],j=c[1],f=Object(s.useState)([]),h=Object(l.a)(f,2),p=h[0],x=h[1],g=Object(s.useState)(),k=Object(l.a)(g,2),C=k[0],U=k[1];Object(s.useEffect)((function(){(function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getUserList();case 2:t=e.sent,j(t),U(t[0]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(s.useEffect)((function(){(function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof C){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N.getUserHistory(C.id);case 4:t=e.sent,x(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),r("")}),[C]);var w=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N.sendMessage(C.id,n);case 4:return e.next=6,N.getUserHistory(C.id);case 6:t=e.sent,x(t),r("");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C.id!==t.id){e.next=2;break}return e.abrupt("return");case 2:U(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"Chat",children:[Object(d.jsx)("div",{className:"Chat--link-exit",children:Object(d.jsx)(O,{link:"\u0412\u044b\u0445\u043e\u0434",href:"#"})}),Object(d.jsxs)("div",{className:"Chat--container",children:[Object(d.jsx)("div",{className:"Chat--userList",children:Object(d.jsx)(b,{selectedUser:C,users:i,onUserSelect:y})}),Object(d.jsxs)("div",{className:"Chat--messageControl",children:[Object(d.jsx)(m,{messages:p}),Object(d.jsx)(v,{onTextChange:function(e){r(e)},onSendMessage:w,value:n})]})]})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,431)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),s(e),r(e),a(e),c(e)}))};c.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(C,{})}),document.getElementById("root")),U()}},[[430,1,2]]]);
//# sourceMappingURL=main.8c5f1cfb.chunk.js.map